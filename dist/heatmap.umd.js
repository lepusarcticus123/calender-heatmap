(function(h,c){typeof exports=="object"&&typeof module<"u"?c(exports):typeof define=="function"&&define.amd?define(["exports"],c):(h=typeof globalThis<"u"?globalThis:h||self,c(h.CalenderHeatmap={}))})(this,function(h){"use strict";class c{constructor(t,d,s){this.container=t,this.data=d,this.options=s;const r={x:20,y:10,color:"green",cellSpacing:2,tipMonth:{value:!0,format:e=>e+"月"},tooltip:{value:!0,format:e=>`${e[1].toFixed(2)} 于 ${e[0].split()[0]}年 ${e[0].split()[1]}月 ${e[0].split()[2]}日`}};this.options={...r,...s}}getColor(t,d){switch(d){case"green":const s=[{threshold:0,color:"#ebedf0"},{threshold:1,color:"#d4f5d0"},{threshold:10,color:"#9be9a8"},{threshold:15,color:"#6dd785"},{threshold:20,color:"#40c463"},{threshold:25,color:"#30a14e"},{threshold:35,color:"#216e39"},{threshold:50,color:"#154823"}];for(let o=s.length-1;o>=0;o--)if(t>=s[o].threshold)return s[o].color;case"purple":const r=[{threshold:0,color:"#f5eef8"},{threshold:1,color:"#ebd7f1"},{threshold:10,color:"#d7bde2"},{threshold:15,color:"#b887cd"},{threshold:20,color:"#a569bd"},{threshold:25,color:"#8e44ad"},{threshold:35,color:"#6b3582"},{threshold:50,color:"#5b2c6f"}];for(let o=r.length-1;o>=0;o--)if(t>=r[o].threshold)return r[o].color;case"blue":const e=[{threshold:0,color:"#ebedf0"},{threshold:1,color:"#d0e7f9"},{threshold:10,color:"#c6e0f5"},{threshold:15,color:"#9bccf2"},{threshold:20,color:"#73b3e7"},{threshold:25,color:"#3b82f6"},{threshold:35,color:"#215bb7"},{threshold:50,color:"#174ea6"}];for(let o=e.length-1;o>=0;o--)if(t>=e[o].threshold)return e[o].color;case"orange":const p=[{threshold:0,color:"#fef5e7"},{threshold:1,color:"#fdebd0"},{threshold:10,color:"#fdd0a6"},{threshold:15,color:"#f5b041"},{threshold:20,color:"#f39c12"},{threshold:25,color:"#dc7633"},{threshold:35,color:"#b24d00"},{threshold:50,color:"#a04000"}];for(let o=p.length-1;o>=0;o--)if(t>=p[o].threshold)return p[o].color;default:return`rgb(${t*255}, ${t*255}, ${t*255})`}}paint(){const t=document.createElement("div");t.setAttribute("id","tooltip");const d=this.container.parentElement;t.style.position="absolute",t.style.backgroundColor="rgba(0, 0, 0, 0.9)",t.style.color="white",t.style.padding="6px",t.style.borderRadius="5px",t.style.opacity="0",t.style.fontSize="smaller",t.style.transition="opacity 0.5s",t.style.pointerEvents="none",d.appendChild(t);const s=this.container.width.baseVal.value,r=this.container.height.baseVal.value;this.container.style.height=r+20;const e=s*.01,p=r*.01;this.data.forEach((o,a)=>{let l=document.createElementNS("http://www.w3.org/2000/svg","rect");if(l.setAttribute("x",Math.floor(a/this.options.y)*(s/this.options.x)),l.setAttribute("y",a%this.options.y*(r/this.options.y)),l.setAttribute("width",s/this.options.x-this.options.cellSpacing),l.setAttribute("height",r/this.options.y-this.options.cellSpacing),l.setAttribute("fill",this.getColor(o[1],this.options.color)),l.setAttribute("rx",e),l.setAttribute("ry",p),this.container.appendChild(l),this.options.tipMonth.value){const f=o[0].split("-")[2],n=o[0].split("-")[1];if(f=="01"){const i=document.createElementNS("http://www.w3.org/2000/svg","text");i.textContent=this.options.tipMonth.format(parseInt(n,10));const b=Math.floor(a/this.options.y)*(s/this.options.x)+10;let u=r+17;i.setAttribute("x",b),i.setAttribute("y",u),i.setAttribute("fill","rgb(174, 174, 174)"),i.setAttribute("font-size","14px"),i.setAttribute("text-anchor","middle"),this.container.appendChild(i)}}this.options.tooltip.value&&(l.addEventListener("mouseover",f=>{t.style.opacity="1",t.textContent=this.options.tooltip.format(o);const n=l.getBoundingClientRect(),i=n.left+n.width/2-t.offsetWidth/2;t.style.left=`${i}px`,t.style.top=`${n.top-n.height*2}px`}),l.addEventListener("mouseout",()=>{t.style.opacity="0"}))})}}h.Heatmap=c,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=heatmap.umd.js.map
